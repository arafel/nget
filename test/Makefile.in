CXXFLAGS=@CXXFLAGS@ @UUINC@ @DEFS@ -I..

CXX=@CXX@
LIBS=@LIBS@

srcdir=@srcdir@

all: TestRunner

../nget:
	$(MAKE) -C .. nget

test: all ../nget
	./test_nget.py

OBJS=TestRunner.o ../file.o ../sockstuff.o ../nrange.o ../log.o ../dupe_file.o ../myregex.o ../strtoker.o ../misc.o
TestRunner: .depend $(OBJS)
	$(CXX) $(CXXFLAGS) $(LDFLAGS) $(OBJS) -o $@ $(LIBS) `cppunit-config --libs`

dep depend .depend: TestRunner.cc
	$(CXX) $(CXXFLAGS) -MM *.cc > .depend

clean:
	-rm TestRunner *.o *.py[co]

distclean: clean
	-rm config.status config.h config.cache config.log Makefile stamp-h .depend *~ .*~ *.rej tags .cvsignore .#*
	-rm -r CVS

.PHONY: all dep depend clean install dist distclean test

include .depend
